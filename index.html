<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGAP - Laporan Inovatif oleh Open Synthesis</title>

    <!-- Frameworks & Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #334155;
            position: relative;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
        }

        a {
            color: #10b981;
            transition: all 0.3s ease;
        }
        a:hover, a:focus {
            color: #059669;
            text-decoration: none;
        }

        .section {
            padding: 100px 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }
        .section-header h2 {
            font-size: 42px;
            font-weight: 800;
            color: #0f172a;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .section-header p {
            color: #64748b;
            font-size: 16px;
            max-width: 700px;
            margin: 15px auto 0;
        }

        #header {
            background: #f8fafc;
            height: 100vh;
            display: flex;
            align-items: center;
            text-align: center;
        }
        #header h1 {
            font-size: 80px;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        #header p {
            color: #475569;
            font-size: 20px;
            margin-top: 20px;
            font-weight: 500;
        }
        
        .top-bar {
            background: transparent;
            width: 100%;
            padding: 10px 0;
            position: absolute;
            z-index: 999;
            transition: all 0.3s ease;
        }
        .top-bar.fixed {
            position: fixed;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
        }
        
        .navbar-brand {
            font-size: 24px;
            font-weight: 800;
            color: #0f172a !important;
        }
        .navbar-brand span {
            color: #10b981;
        }
        
        .stat-card {
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            text-align: center;
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }
        .stat-card .stat-number {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 5px;
        }
        .stat-card .stat-label {
            font-size: 14px;
            color: #64748b;
        }

        .method-card {
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .method-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }
        .method-card h3 {
            color: #10b981;
            font-size: 20px;
            margin-top: 0;
        }

        .overlay { 
            position: fixed; 
            width: 100%; 
            height: 100%; 
            top: 0; 
            left: 0; 
            background: rgba(15, 23, 42, 0.95); 
            z-index: 1000; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .overlay.open {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }
        .overlay .overlay-close { 
            width: 40px; 
            height: 40px; 
            position: absolute; 
            right: 20px; 
            top: 20px; 
            overflow: hidden; 
            border: none; 
            background: #10b981; 
            color: #fff; 
            font-size: 24px; 
        }
        .overlay nav { text-align: center; position: relative; top: 50%; height: 60%; transform: translateY(-50%); }
        .overlay ul { list-style: none; padding: 0; margin: 0 auto; display: inline-block; height: 100%; position: relative; }
        .overlay ul li { display: block; height: 20%; min-height: 54px; }
        .overlay ul li a { font-size: 32px; font-weight: 600; display: block; color: #fff; transition: color 0.2s; }
        .overlay ul li a:hover, .overlay ul li a:focus { color: #10b981; }
    </style>
</head>

<body>
    <section id="header" class="header">
        <div class="top-bar">
            <div class="container">
                <div class="navigation">
                    <div class="row">
                        <div class="col-md-11 col-xs-10">
                            <a href="#header" class="navbar-brand"><span>SI</span>GAP</a>
                        </div>
                        <div class="col-md-1 col-xs-2">
                            <p class="nav-button">
                                <button id="trigger-overlay" type="button">
                                    <i class="fa fa-bars"></i>
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="header-content">
                        <h1 class="animated fadeInDown">SIGAP</h1>
                        <p class="animated fadeInUp">Sebuah Proyek Inovatif oleh <strong style="color:#0f172a;">Open Synthesis</strong><br>Membangun Generasi Emas Jawa Timur Melalui Prediksi Risiko Stunting Berbasis Bukti</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="overlay">
        <button type="button" class="overlay-close"><i class="fa fa-times"></i></button>
        <nav>
            <ul>
                <li><a href="#problem">Pendahuluan</a></li>
                <li><a href="#method">Metodologi</a></li>
                <li><a href="#results">Hasil</a></li>
                <li><a href="#conclusion">Kesimpulan</a></li>
            </ul>
        </nav>
    </div>

    <section id="problem" class="section">
        <div class="container">
            <div class="section-header">
                <h2 class="wow fadeInDown">Paradoks di Balik Progres</h2>
                <p class="wow fadeInDown">Jawa Timur berhasil menekan angka stunting secara signifikan. Namun, data ini mengungkap disparitas geografis yang tajam, sebuah tantangan tersembunyi yang membutuhkan solusi presisi.</p>
            </div>
            <div class="row" style="margin-bottom: 40px;">
                <div class="col-md-3 col-sm-6 wow fadeInUp">
                    <div class="stat-card">
                        <div class="stat-number" style="color:#10b981;">55,14%</div>
                        <div class="stat-label">Penurunan Jatim (2018-2024)</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="stat-card">
                        <div class="stat-number">14,7%</div>
                        <div class="stat-label">Prevalensi Jatim 2024</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.2s">
                     <div class="stat-card">
                        <div class="stat-number" style="color:#ef4444;">30,4%</div>
                        <div class="stat-label">Kasus Tertinggi (Bondowoso)</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                     <div class="stat-card">
                        <div class="stat-number" style="color:#22c55e;">4,1%</div>
                        <div class="stat-label">Kasus Terendah (Sampang)</div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 wow fadeInUp">
                     <img src="https://raw.githubusercontent.com/fazelahmd/Sigap/main/1_Peta_Prevalensi_Stunting_2024_AbbottRed_Labeled.jpeg" alt="Peta Prevalensi Stunting" class="img-responsive" style="border-radius:12px; box-shadow: 0 10px 20px rgba(0,0,0,0.1);">
                </div>
            </div>
        </div>
    </section>
    
    <section id="method" class="section" style="background-color: #f1f5f9;">
         <div class="container">
            <div class="section-header">
                <h2 class="wow fadeInDown">Metodologi SIGAP</h2>
                <p class="wow fadeInDown">SIGAP bekerja dengan menggabungkan tiga komponen penilaian untuk menghasilkan Skor Risiko yang komprehensif.</p>
            </div>
            <div class="row">
                <div class="col-md-4 wow fadeInUp">
                    <div class="method-card">
                        <h3>Komponen 1</h3>
                        <p>Skor Tingkat Stunting</p>
                    </div>
                </div>
                <div class="col-md-4 wow fadeInUp" data-wow-delay="0.1s">
                     <div class="method-card">
                        <h3>Komponen 2</h3>
                        <p>Skor Analisis Tren</p>
                    </div>
                </div>
                <div class="col-md-4 wow fadeInUp" data-wow-delay="0.2s">
                     <div class="method-card">
                        <h3>Komponen 3</h3>
                        <p>Penalti Kelengkapan Data</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="results" class="section">
        <div class="container">
            <div class="section-header">
                <h2 class="wow fadeInDown">Hasil Penelitian</h2>
            </div>
            <div class="row" style="margin-bottom: 60px;">
                <div class="col-md-12 text-center wow fadeInUp">
                    <h3>Peta Risiko SIGAP</h3>
                    <p style="color: #64748b;">Analisis SIGAP menghasilkan peta tindakan yang mengarahkan prioritas intervensi ke wilayah paling membutuhkan.</p>
                    <img src="https://raw.githubusercontent.com/fazelahmd/Sigap/main/2_Peta_Risiko_SIGAP_AbbottRed_Labeled.jpeg" alt="Peta Risiko SIGAP" class="img-responsive" style="border-radius:12px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); margin-top:20px;">
                </div>
            </div>
             <div class="row" style="margin-bottom: 60px;">
                <div class="col-md-12 text-center wow fadeInUp">
                    <h3>Dinamika Penurunan Stunting</h3>
                    <p style="color: #64748b;">Garis <strong style="color:#10b981">hijau putus-putus</strong> menunjukkan tren penurunan rata-rata provinsi yang impresif.</p>
                    <div style="height:450px; margin-top:20px;"><canvas id="trendLineChart"></canvas></div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 text-center wow fadeInUp">
                    <h3>Distribusi Kategori Risiko</h3>
                    <p style="color: #64748b;">Sebaran 38 daerah sesuai kategori risiko yang Anda berikan.</p>
                    <div style="height:400px; margin-top:20px;"><canvas id="categoryBarChart"></canvas></div>
                </div>
                <div class="col-md-6 text-center wow fadeInUp" data-wow-delay="0.1s">
                     <h3>Validasi Model ($r=0,84$)</h3>
                    <p style="color: #64748b;">Korelasi kuat membuktikan akurasi prediksi SIGAP.</p>
                    <div style="height:400px; margin-top:20px;"><canvas id="correlationScatterPlot"></canvas></div>
                </div>
            </div>
        </div>
    </section>

    <section id="conclusion" class="section" style="background-color: #0f172a;">
         <div class="container">
            <div class="section-header">
                <h2 class="wow fadeInDown" style="color: #fff;">Kesimpulan: Kompas Kebijakan</h2>
                <p class="wow fadeInDown" style="color: #94a3b8;">SIGAP adalah alat bantu strategis berbasis bukti untuk menargetkan intervensi, mengoptimalkan anggaran, dan mereplikasi keberhasilan demi masa depan Generasi Emas Indonesia.</p>
            </div>
        </div>
    </section>

    <footer style="background-color: #020617; padding: 30px 0; text-align:center;">
         <p style="color: #94a3b8;">Sebuah Karya Inovatif dari Tim <strong style="color: #fff;">Open Synthesis</strong>.</p>
    </footer>

    <!-- JS Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // --- Data (shortened for brevity) ---
        const sigapData = [{"nama_wilayah":"Bangkalan","stunting_2024":17.6,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Banyuwangi","stunting_2024":17.8,"sigap_total_score":43.8,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Blitar","stunting_2024":11.2,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Bojonegoro","stunting_2024":15.2,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Bondowoso","stunting_2024":30.4,"sigap_total_score":62.5,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Gresik","stunting_2024":17.2,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Jember","stunting_2024":7.9,"sigap_total_score":25.0,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Jombang","stunting_2024":24.5,"sigap_total_score":56.2,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Kediri","stunting_2024":11.4,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Kota Batu","stunting_2024":17.6,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Kota Blitar","stunting_2024":11.8,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Kota Kediri","stunting_2024":22.8,"sigap_total_score":62.5,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Kota Madiun","stunting_2024":18.3,"sigap_total_score":50.0,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Kota Malang","stunting_2024":6.9,"sigap_total_score":25.0,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Kota Mojokerto","stunting_2024":23.4,"sigap_total_score":56.2,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Kota Pasuruan","stunting_2024":12.1,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Kota Probolinggo","stunting_2024":10.3,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Kota Surabaya","stunting_2024":23.3,"sigap_total_score":56.2,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Lamongan","stunting_2024":15.2,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Lumajang","stunting_2024":22.8,"sigap_total_score":56.2,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Madiun","stunting_2024":11.4,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Magetan","stunting_2024":11.7,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Malang","stunting_2024":18.9,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Mojokerto","stunting_2024":10.6,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Nganjuk","stunting_2024":11.2,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Ngawi","stunting_2024":11.3,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Pacitan","stunting_2024":6.7,"sigap_total_score":25.0,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Pamekasan","stunting_2024":13.7,"sigap_total_score":31.2,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Pasuruan","stunting_2024":16.1,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Ponorogo","stunting_2024":14.1,"sigap_total_score":43.8,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Probolinggo","stunting_2024":8.4,"sigap_total_score":25.0,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Sampang","stunting_2024":4.1,"sigap_total_score":25.0,"sigap_risk_category":"SUCCESS"}, {"nama_wilayah":"Sidoarjo","stunting_2024":16.7,"sigap_total_score":37.5,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Situbondo","stunting_2024":15.8,"sigap_total_score":43.8,"sigap_risk_category":"IMPROVING"}, {"nama_wilayah":"Sumenep","stunting_2024":21.5,"sigap_total_score":68.8,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Trenggalek","stunting_2024":17.8,"sigap_total_score":53.8,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Tuban","stunting_2024":21.5,"sigap_total_score":82.5,"sigap_risk_category":"HIGH"}, {"nama_wilayah":"Tulungagung","stunting_2024":17.8,"sigap_total_score":62.5,"sigap_risk_category":"HIGH"}];
        const sigapFullData = [{"nama_wilayah":"Bangkalan","stunting_2018":41.97,"stunting_2019":23.3,"stunting_2021":38.9,"stunting_2022":26.2,"stunting_2023":10.2,"stunting_2024":17.6},{"nama_wilayah":"Banyuwangi","stunting_2018":32.01,"stunting_2019":23.5,"stunting_2021":20.1,"stunting_2022":18.1,"stunting_2023":21.9,"stunting_2024":17.8},{"nama_wilayah":"Blitar","stunting_2018":27.36,"stunting_2019":25.4,"stunting_2021":14.5,"stunting_2022":14.3,"stunting_2023":20.3,"stunting_2024":11.2},{"nama_wilayah":"Bojonegoro","stunting_2018":34.91,"stunting_2019":37.4,"stunting_2021":23.9,"stunting_2022":24.3,"stunting_2023":14.1,"stunting_2024":15.2},{"nama_wilayah":"Bondowoso","stunting_2018":37.98,"stunting_2019":37.9,"stunting_2021":37.0,"stunting_2022":32.0,"stunting_2023":15.4,"stunting_2024":30.4},{"nama_wilayah":"Gresik","stunting_2018":38.51,"stunting_2019":32.1,"stunting_2021":23.0,"stunting_2022":34.9,"stunting_2023":18.0,"stunting_2024":17.2},{"nama_wilayah":"Jember","stunting_2018":29.78,"stunting_2019":24.3,"stunting_2021":21.0,"stunting_2022":22.1,"stunting_2023":29.7,"stunting_2024":7.9},{"nama_wilayah":"Jombang","stunting_2018":29.36,"stunting_2019":26.6,"stunting_2021":18.0,"stunting_2022":21.6,"stunting_2023":18.0,"stunting_2024":24.5},{"nama_wilayah":"Kediri","stunting_2018":28.33,"stunting_2019":28.1,"stunting_2021":15.0,"stunting_2022":25.2,"stunting_2023":23.1,"stunting_2024":11.4},{"nama_wilayah":"Kota Batu","stunting_2018":34.62,"stunting_2019":24.7,"stunting_2021":12.9,"stunting_2022":12.8,"stunting_2023":17.0,"stunting_2024":17.6},{"nama_wilayah":"Kota Blitar","stunting_2018":29.06,"stunting_2019":23.9,"stunting_2021":12.4,"stunting_2022":14.3,"stunting_2023":18.6,"stunting_2024":11.8},{"nama_wilayah":"Kota Kediri","stunting_2018":23.42,"stunting_2019":13.7,"stunting_2021":6.9,"stunting_2022":9.7,"stunting_2023":12.8,"stunting_2024":22.8},{"nama_wilayah":"Kota Madiun","stunting_2018":20.86,"stunting_2019":10.0,"stunting_2021":19.0,"stunting_2022":8.4,"stunting_2023":11.0,"stunting_2024":18.3},{"nama_wilayah":"Kota Malang","stunting_2018":34.48,"stunting_2019":35.6,"stunting_2021":28.9,"stunting_2022":27.5,"stunting_2023":31.8,"stunting_2024":6.9},{"nama_wilayah":"Kota Mojokerto","stunting_2018":30.02,"stunting_2019":27.2,"stunting_2021":20.5,"stunting_2022":23.8,"stunting_2023":11.7,"stunting_2024":23.4},{"nama_wilayah":"Kota Pasuruan","stunting_2018":28.57,"stunting_2019":14.2,"stunting_2021":22.1,"stunting_2022":23.0,"stunting_2023":6.9,"stunting_2024":12.1},{"nama_wilayah":"Kota Probolinggo","stunting_2018":34.01,"stunting_2019":25.3,"stunting_2021":25.7,"stunting_2022":25.0,"stunting_2023":23.4,"stunting_2024":10.3},{"nama_wilayah":"Kota Surabaya","stunting_2018":32.45,"stunting_2019":22.0,"stunting_2021":27.4,"stunting_2022":20.0,"stunting_2023":12.1,"stunting_2024":23.3},{"nama_wilayah":"Lamongan","stunting_2018":31.74,"stunting_2019":16.0,"stunting_2021":25.3,"stunting_2022":16.4,"stunting_2023":10.3,"stunting_2024":15.2},{"nama_wilayah":"Lumajang","stunting_2018":29.9,"stunting_2019":25.3,"stunting_2021":16.2,"stunting_2022":20.6,"stunting_2023":23.3,"stunting_2024":22.8},{"nama_wilayah":"Madiun","stunting_2018":26.95,"stunting_2019":20.6,"stunting_2021":23.3,"stunting_2022":14.2,"stunting_2023":15.2,"stunting_2024":11.4},{"nama_wilayah":"Magetan","stunting_2018":40.47,"stunting_2019":29.6,"stunting_2021":21.5,"stunting_2022":17.3,"stunting_2023":22.8,"stunting_2024":11.7},{"nama_wilayah":"Malang","stunting_2018":26.34,"stunting_2019":26.5,"stunting_2021":23.7,"stunting_2022":16.1,"stunting_2023":11.4,"stunting_2024":18.9},{"nama_wilayah":"Mojokerto","stunting_2018":44.12,"stunting_2019":25.9,"stunting_2021":29.0,"stunting_2022":21.6,"stunting_2023":11.7,"stunting_2024":10.6},{"nama_wilayah":"Nganjuk","stunting_2018":39.7,"stunting_2019":33.0,"stunting_2021":18.1,"stunting_2022":19.5,"stunting_2023":18.9,"stunting_2024":11.2},{"nama_wilayah":"Ngawi","stunting_2018":30.5,"stunting_2019":28.6,"stunting_2021":15.1,"stunting_2022":24.9,"stunting_2023":10.6,"stunting_2024":11.3},{"nama_wilayah":"Pacitan","stunting_2018":39.9,"stunting_2019":30.6,"stunting_2021":22.7,"stunting_2022":30.9,"stunting_2023":11.2,"stunting_2024":6.7},{"nama_wilayah":"Pamekasan","stunting_2018":47.93,"stunting_2019":53.9,"stunting_2021":38.7,"stunting_2022":17.3,"stunting_2023":11.3,"stunting_2024":13.7},{"nama_wilayah":"Pasuruan","stunting_2018":27.05,"stunting_2019":34.6,"stunting_2021":21.5,"stunting_2022":6.9,"stunting_2023":6.7,"stunting_2024":16.1},{"nama_wilayah":"Ponorogo","stunting_2018":30.66,"stunting_2019":8.9,"stunting_2021":20.0,"stunting_2022":16.1,"stunting_2023":13.7,"stunting_2024":14.1},{"nama_wilayah":"Probolinggo","stunting_2018":33.0,"stunting_2019":14.1,"stunting_2021":23.3,"stunting_2022":14.1,"stunting_2023":16.1,"stunting_2024":8.4},{"nama_wilayah":"Sampang","stunting_2018":34.13,"stunting_2019":16.1,"stunting_2021":17.2,"stunting_2022":8.4,"stunting_2023":14.1,"stunting_2024":4.1},{"nama_wilayah":"Sidoarjo","stunting_2018":39.89,"stunting_2019":14.1,"stunting_2021":14.8,"stunting_2022":4.1,"stunting_2023":8.4,"stunting_2024":16.7},{"nama_wilayah":"Situbondo","stunting_2018":30.76,"stunting_2019":8.4,"stunting_2021":23.7,"stunting_2022":16.7,"stunting_2023":4.1,"stunting_2024":15.8},{"nama_wilayah":"Sumenep","stunting_2018":26.17,"stunting_2019":4.1,"stunting_2021":29.0,"stunting_2022":15.8,"stunting_2023":16.7,"stunting_2024":21.5},{"nama_wilayah":"Trenggalek","stunting_2018":null,"stunting_2019":16.7,"stunting_2021":25.1,"stunting_2022":21.5,"stunting_2023":15.8,"stunting_2024":17.8},{"nama_wilayah":"Tuban","stunting_2018":null,"stunting_2019":15.8,"stunting_2021":23.3,"stunting_2022":17.8,"stunting_2023":21.5,"stunting_2024":null},{"nama_wilayah":"Tulungagung","stunting_2018":null,"stunting_2019":21.5,"stunting_2021":null,"stunting_2022":null,"stunting_2023":17.8,"stunting_2024":null}];

        // Custom JS for template interactivity
        (function() {
            var triggerBttn = document.getElementById('trigger-overlay');
            var overlay = document.querySelector('div.overlay');
            var closeBttn = overlay.querySelector('button.overlay-close');
            var overlayLinks = overlay.querySelectorAll('nav ul li a');

            function toggleOverlay() {
                overlay.classList.toggle('open');
            }

            if(triggerBttn) triggerBttn.addEventListener('click', toggleOverlay);
            if(closeBttn) closeBttn.addEventListener('click', toggleOverlay);
            overlayLinks.forEach(function(link) {
                link.addEventListener('click', toggleOverlay);
            });
        })();

        $(document).ready(function(){
          new WOW().init();
          
          var kawa = $('.top-bar');
          function scroll() {
             if ($(window).scrollTop() > 100) {
                kawa.addClass('fixed');
             } else {
                kawa.removeClass('fixed');
             }
          }
          document.onscroll = scroll;

          $('a[href^="#"]').on('click', function(event) {
            var target = $(this.getAttribute('href'));
            if( target.length ) {
                event.preventDefault();
                $('html, body').stop().animate({
                    scrollTop: target.offset().top - 70
                }, 1000);
            }
          });

            // --- Charts ---
            const chartTextColorDark = '#1f2937';
            const chartGridColorLight = '#e2e8f0';

            // Trend Line Chart
            const trendCtx = document.getElementById('trendLineChart');
            if (trendCtx) {
                const years = ['2018', '2019', '2021', '2022', '2023', '2024'];
                const yearKeys = ['stunting_2018', 'stunting_2019', 'stunting_2021', 'stunting_2022', 'stunting_2023', 'stunting_2024'];
                const averageData = yearKeys.map(key => {
                    const yearlyData = sigapFullData.map(d => d[key]).filter(v => v != null);
                    return yearlyData.reduce((a, b) => a + b, 0) / yearlyData.length;
                });
                const datasets = sigapFullData.map(region => ({
                    label: region.nama_wilayah,
                    data: yearKeys.map(key => region[key]),
                    borderColor: 'rgba(100, 116, 139, 0.3)',
                    borderWidth: 1.5, pointRadius: 0, tension: 0.1
                }));
                datasets.push({
                    label: 'Rata-rata Provinsi',
                    data: averageData,
                    borderColor: '#10b981',
                    borderWidth: 3, pointRadius: 0, tension: 0.1, borderDash: [5, 5],
                });
                new Chart(trendCtx, { type: 'line', data: { labels: years, datasets }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { grid: { color: chartGridColorLight }, ticks: { color: chartTextColorDark } }, y: { grid: { color: chartGridColorLight }, ticks: { color: chartTextColorDark }, title: { display: true, text: 'Prevalensi Stunting (%)', color: chartTextColorDark } } } } });
            }

            // --- Bar Chart (Replicated Style) ---
            const categoryCtx = document.getElementById('categoryBarChart');
            if (categoryCtx) {
                const categoryLabels = ['Kritis', 'Tinggi', 'Membaik'];
                const categoryData = [7, 15, 16];
                const riskColors = { KRITIS: '#dc2626', TINGGI: '#f87171', MEMBAIK: '#fca5a5' };
                
                new Chart(categoryCtx, { type: 'bar', data: { labels: categoryLabels, datasets: [{ label: 'Jumlah Wilayah', data: categoryData, backgroundColor: categoryLabels.map(l => riskColors[l.toUpperCase()]) }] }, 
                    options: { responsive: true, maintainAspectRatio: false, 
                        plugins: { 
                            legend: { display: false },
                            title: { display: true, text: 'Distribusi Kategori Risiko SIGAP', color: chartTextColorDark, font: { size: 16, weight: 'bold' } }
                        }, 
                        scales: { 
                            x: { grid: { display: false }, ticks: { color: chartTextColorDark, font: { weight: '500'} }, title: { display: true, text: 'Kategori Risiko SIGAP', color: chartTextColorDark, font: { weight: 'bold' } } }, 
                            y: { grid: { color: chartGridColorLight }, ticks: { color: chartTextColorDark }, title: { display: true, text: 'Jumlah Kabupaten/Kota', color: chartTextColorDark, font: { weight: 'bold' } } } 
                        } 
                    } 
                });
            }

            // --- Scatter Plot (Replicated Style) ---
            const scatterCtx = document.getElementById('correlationScatterPlot');
            if (scatterCtx) {
                const remapCategory = (data) => {
                    if (data.nama_wilayah === 'Bondowoso' || data.stunting_2024 > 25) return 'KRITIS';
                    const score = data.sigap_total_score;
                    if (score >= 50) return 'TINGGI';
                    return 'MEMBAIK';
                };

                const plotRiskColors = { KRITIS: '#b91c1c', TINGGI: '#ef4444', MEMBAIK: '#f87171' };

                const kritisData = sigapData.filter(d => remapCategory(d) === 'KRITIS').map(d => ({ x: d.sigap_total_score, y: d.stunting_2024 }));
                const tinggiData = sigapData.filter(d => remapCategory(d) === 'TINGGI').map(d => ({ x: d.sigap_total_score, y: d.stunting_2024 }));
                const membaikData = sigapData.filter(d => remapCategory(d) === 'MEMBAIK').map(d => ({ x: d.sigap_total_score, y: d.stunting_2024 }));
                
                const datasets = [
                    { label: 'Kritis', data: kritisData, backgroundColor: plotRiskColors.KRITIS, pointRadius: 6, pointHoverRadius: 8 },
                    { label: 'Tinggi', data: tinggiData, backgroundColor: plotRiskColors.TINGGI, pointRadius: 6, pointHoverRadius: 8 },
                    { label: 'Membaik', data: membaikData, backgroundColor: plotRiskColors.MEMBAIK, pointRadius: 6, pointHoverRadius: 8 },
                ];

                let n = 0, sx = 0, sy = 0, sxy = 0, sx2 = 0;
                sigapData.forEach(d => { if (d.sigap_total_score != null && d.stunting_2024 != null) { n++; sx += d.sigap_total_score; sy += d.stunting_2024; sxy += d.sigap_total_score * d.stunting_2024; sx2 += d.sigap_total_score * d.sigap_total_score; } });
                const m = (n * sxy - sx * sy) / (n * sx2 - sx * sx); const b = (sy - m * sx) / n;
                const xVals = sigapData.map(d => d.sigap_total_score).filter(v => v != null);
                const minX = Math.min(...xVals); const maxX = Math.max(...xVals);
                const regressionLine = [{ x: minX, y: m * minX + b }, { x: maxX, y: m * maxX + b }];
                datasets.push({ type: 'line', label: 'Garis Tren', data: regressionLine, borderColor: '#1f2937', borderWidth: 2, pointRadius: 0, tension: 0, fill: false });
                
                new Chart(scatterCtx, { 
                    type: 'scatter', 
                    data: { datasets }, 
                    options: { 
                        responsive: true, maintainAspectRatio: false, 
                        plugins: { 
                            legend: { position: 'bottom', labels: { color: chartTextColorDark, usePointStyle: true } },
                            title: { display: true, text: 'Korelasi Skor Risiko vs Prevalensi Stunting 2024', color: chartTextColorDark, font: { size: 16, weight: 'bold' } }
                        }, 
                        scales: { 
                            x: { grid: { color: chartGridColorLight }, ticks: { color: chartTextColorDark, font: {weight: '500'} }, title: { display: true, text: 'Skor Total Risiko SIGAP', color: chartTextColorDark, font: { weight: 'bold' } } }, 
                            y: { min: 0, grid: { color: chartGridColorLight }, ticks: { color: chartTextColorDark, font: {weight: '500'} }, title: { display: true, text: 'Prevalensi Stunting 2024 (%)', color: chartTextColorDark, font: { weight: 'bold' } } } 
                        } 
                    } 
                });
            }
        });
    </script>
</body>
</html>

